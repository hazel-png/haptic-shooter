<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>振動同期サンプル</title>
</head>
<body>
  <video id="movie" width="640" controls>
    <source src="your_movie.mp4" type="video/mp4" />
    お使いのブラウザは動画タグに対応していません。
  </video>

  <script>
    const video = document.getElementById('movie');

    // 振動を起こすタイミング（秒）とパターンを配列で管理
    const vibrationEvents = [
      { time: 2.5, pattern: [100, 50, 100] },  // 2.5秒で振動パターン開始
      { time: 5.0, pattern: [200] },           // 5秒で強めの単発振動
      { time: 8.0, pattern: [50, 30, 50, 30, 50] } // 8秒で連続パルス振動
    ];

    // 振動イベントの処理済み管理
    let triggeredEvents = new Set();

    video.addEventListener('timeupdate', () => {
      const currentTime = video.currentTime;

      vibrationEvents.forEach(event => {
        if (!triggeredEvents.has(event.time) && currentTime >= event.time) {
          if (navigator.vibrate) {
            navigator.vibrate(event.pattern);
          }
          triggeredEvents.add(event.time);
        }
      });
    });
  </script>
</body>
</html>
